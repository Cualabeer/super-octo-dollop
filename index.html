<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOS Mechanics – Ultra Premium Mobile Garage</title>
<style>
body { margin:0; font-family:'Helvetica Neue', Arial, sans-serif; background:#f9f9f9; color:#111; line-height:1.5; }
header { background:#075e54; color:#fff; text-align:center; padding:1rem; font-size:1.5rem; font-weight:bold; letter-spacing:1px; }
h1, h2, h3 { margin:0.5rem 0; }
h1 { font-size:1.6rem; }
h2 { color:#075e54; font-size:1.3rem; margin-bottom:0.5rem; }
section { padding:1rem; max-width:900px; margin:auto; }
.cards-container { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; }
.card { background:#fff; border-radius:12px; padding:1rem; flex:1 1 40%; box-shadow:0 1px 4px rgba(0,0,0,0.1); cursor:pointer; transition:transform 0.2s; }
.card:hover { transform:scale(1.02); }
.toggle-btn { background:#075e54; color:#fff; border:none; padding:0.5rem 1rem; border-radius:8px; cursor:pointer; margin-top:0.5rem; display:block; width:150px; text-align:center; margin:auto; }

/* Modal */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); backdrop-filter:blur(5px); z-index:3000; justify-content:center; align-items:center; padding:1rem; }
.modal-content { background:#fff; padding:2rem; border-radius:15px; max-width:500px; width:100%; text-align:center; box-shadow:0 0 40px rgba(0,0,0,0.3); position:relative; }
.modal-close { position:absolute; top:15px; right:15px; background:#075e54; color:#fff; border:none; padding:5px 10px; font-size:1rem; cursor:pointer; border-radius:8px; font-weight:bold; }
input, select, textarea, button { width:100%; padding:0.6rem; margin-bottom:0.6rem; border-radius:8px; border:1px solid #ccc; font-size:1rem; }
input, select, textarea { background:#f1f1f1; color:#111; }
button { background:#25d366; color:#fff; font-weight:bold; cursor:pointer; transition:transform 0.2s; }
button:hover { transform:scale(1.05); }

/* Footer */
footer { background:#075e54; color:#fff; text-align:center; padding:1rem; margin-top:2rem; font-size:0.9rem; }

/* Mobile adjustments */
@media(max-width:600px){ .card{flex:1 1 90%;} }
</style>
</head>
<body>

<header>SOS Mechanics – Premium Mobile Garage</header>

<section class="hero" style="text-align:center;">
  <h1>Fast, Reliable Mobile Car Service</h1>
  <p>From oil changes to premium packages, we bring professional garage care straight to your door.</p>
  <button onclick="openFormModal()">Book Your Service</button>
</section>

<!-- Services Preview -->
<section>
<h2>Services</h2>
<p>Essential maintenance and high-profit add-ons.</p>
<div class="cards-container" id="servicesContainer">
  <div class="more-items" style="display:none; flex-wrap:wrap; gap:0.5rem;">
    <div class="card" onclick="showInfoModal('Oil & Filter Service')">Oil & Filter – £100</div>
    <div class="card" onclick="showInfoModal('Brake Pads Replacement')">Brake Pads – £120</div>
    <div class="card" onclick="showInfoModal('Battery Replacement')">Battery – £150</div>
    <div class="card" onclick="showInfoModal('A/C Re-Gas')">A/C Re-Gas – £75</div>
    <div class="card" onclick="showInfoModal('Engine Diagnostic Scan')">Engine Diagnostic Scan – £60</div>
    <div class="card" onclick="showInfoModal('Oil Top-Up Service')">Oil Top-Up – £35</div>
    <div class="card" onclick="showInfoModal('Brake Fluid Flush')">Brake Fluid Flush – £45</div>
  </div>
</div>
<button class="toggle-btn" onclick="toggleSection('servicesContainer')">Show More ▼</button>
</section>

<!-- Bundles Preview -->
<section>
<h2>Bundles & Packages</h2>
<p>Our popular packages give comprehensive coverage and peace of mind.</p>
<div class="cards-container" id="bundlesContainer">
  <div class="more-items" style="display:none; flex-wrap:wrap; gap:0.5rem;">
    <div class="card" onclick="showInfoModal('Essential Care Bundle')">Essential Care Bundle – £260</div>
    <div class="card" onclick="showInfoModal('Complete Health Package')">Complete Health Package – £450</div>
    <div class="card" onclick="showInfoModal('Monthly Essential Plan')">Monthly Essential Plan – £29/mo</div>
    <div class="card" onclick="showInfoModal('Premium Care Plan')">Premium Care Plan – £49/mo</div>
    <div class="card" onclick="showInfoModal('Diagnostics & ECU Reset')">Diagnostics & ECU Reset – £60</div>
    <div class="card" onclick="showInfoModal('Paint Protection Coating')">Paint Protection Coating – £120</div>
    <div class="card" onclick="showInfoModal('Premium Car Wash & Detailing')">Premium Car Wash & Detailing – £70</div>
  </div>
</div>
<button class="toggle-btn" onclick="toggleSection('bundlesContainer')">Show More ▼</button>
</section>

<!-- Call to Action -->
<section style="text-align:center; margin:2rem 0;">
  <p>Ready to book? Fill your details and we’ll handle the rest.</p>
  <button onclick="openFormModal()">Book via WhatsApp</button>
</section>

<!-- Footer -->
<footer>
<p><strong>SOS Mechanics Ltd.</strong> | Mobile Garage Services | Registered in England & Wales</p>
<p>Address: 123 Premium Garage Lane, London, UK | Company Reg: 12345678 | VAT: GB123456789</p>
<p>Contact: <a href="mailto:mobile@sosmechanics.co.uk" style="color:#fff;">mobile@sosmechanics.co.uk</a> | <a href="https://wa.me/447405937104" target="_blank" style="color:#fff;">WhatsApp Chat</a></p>
<p><a href="#" style="color:#fff;">Terms & Conditions</a> | <a href="#" style="color:#fff;">Privacy Policy</a></p>
</footer>

<!-- Modal -->
<div id="bookingModal" class="modal">
  <div class="modal-content" id="modalContent">
    <button class="modal-close" onclick="closeModal()">✕</button>
    <h2 id="modalTitle">Service Details</h2>
    <div id="modalBody"></div>
  </div>
</div>

<script>
// Service Data
const servicesData = {
"Oil & Filter Service": {price:100, desc:"Premium oil & filter change for optimal engine performance."},
"Brake Pads Replacement": {price:120, desc:"Replace worn brake pads for safety & reliability."},
"Battery Replacement": {price:150, desc:"Replace old battery to ensure reliable starts."},
"A/C Re-Gas": {price:75, desc:"Recharge your air conditioning system for comfort."},
"Engine Diagnostic Scan": {price:60, desc:"Full electronic scan to detect hidden issues."},
"Oil Top-Up Service": {price:35, desc:"Quick top-up to maintain engine oil level."},
"Brake Fluid Flush": {price:45, desc:"Replace old brake fluid for optimal braking."},
"Essential Care Bundle": {price:260, desc:"Oil & Filter + Brake Pads Replacement combined."},
"Complete Health Package": {price:450, desc:"All main services for full vehicle health."},
"Monthly Essential Plan": {price:29, desc:"Monthly subscription covering essential services."},
"Premium Care Plan": {price:49, desc:"Monthly subscription covering premium services."},
"Diagnostics & ECU Reset": {price:60, desc:"Full ECU reset and diagnostics."},
"Paint Protection Coating": {price:120, desc:"Protect your paint with premium coating."},
"Premium Car Wash & Detailing": {price:70, desc:"Full exterior wash and interior detailing."}
};

// Selected services
let selectedServices = [];
let formFilled = false;
let formData = {};

// Show service info modal
function showInfoModal(service){
  const data = servicesData[service];
  const modalBody = document.getElementById('modalBody');
  document.getElementById('modalTitle').innerText = service;
  modalBody.innerHTML = `<p>${data.desc}</p>
  <p><strong>Price: £${data.price}</strong></p>
  <button onclick="addService('${service}')">Add to Booking</button>`;
  document.getElementById('bookingModal').style.display='flex';
}

// Add service
function addService(service){
  selectedServices.push(service);
  closeModal();
  if(!formFilled){ openFormModal(); }
}

// Toggle sections
function toggleSection(containerId){
  const container = document.getElementById(containerId);
  const moreItems = container.querySelector('.more-items');
  const btn = container.parentElement.querySelector('.toggle-btn');
  
  if(moreItems.style.display === 'none'){
    moreItems.style.display = 'flex';
    btn.innerText = "Show Less ▲";
  } else {
    moreItems.style.display = 'none';
    btn.innerText = "Show More ▼";
  }
}

// Open form modal
function openFormModal(){
  const modalBody = document.getElementById('modalBody');
  modalBody.innerHTML = `<form id="bookingForm">
    <p>Enter your details to book:</p>
    <input type="text" id="clientName" placeholder="Name" required>
    <input type="text" id="clientContact" placeholder="Phone or Email" required>
    <input type="text" id="clientCar" placeholder="Car Model & Reg" required>
    <input type="text" id="clientLocation" placeholder="Detecting location..." required readonly>
    <button type="button" onclick="submitForm()">Submit Details</button>
  </form>`;
  document.getElementById('bookingModal').style.display='flex';

  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(async (pos)=>{
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      formData.lat = lat;
      formData.lon = lon;
      const address = await reverseGeocode(lat, lon);
      document.getElementById('clientLocation').value = address || `${lat},${lon}`;
    }, (err)=>{
      document.getElementById('clientLocation').placeholder = "Enter location manually";
    });
  }
}

// Reverse geocode
async function reverseGeocode(lat, lon){
  try{
    const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
    const data = await res.json();
    return data.display_name;
  }catch(e){ return null; }
}

// Submit form
function submitForm(){
  const name = document.getElementById('clientName').value.trim();
  const contact = document.getElementById('clientContact').value.trim();
  const car = document.getElementById('clientCar').value.trim();
  const location = document.getElementById('clientLocation').value.trim();
  if(!name||!contact||!car||!location){ alert("Fill all fields"); return; }
  formData.name=name; formData.contact=contact; formData.car=car; formData.location=location;
  formFilled=true;
  openSummaryModal();
}

// Booking summary
function openSummaryModal(){
  const modalBody=document.getElementById('modalBody');
  modalBody.innerHTML=`<h3>Booking Summary</h3>
    <p>Tap below to send your booking via WhatsApp:</p>
    <button onclick="sendWhatsApp()">Send Booking via WhatsApp</button>`;
}

// WhatsApp link
function sendWhatsApp(){
  const number="447405937104";
  let message=`Hello SOS Mechanics,%0AName: ${formData.name}%0AContact: ${formData.contact}%0ACar: ${formData.car}%0ALocation: ${formData.location}%0AMap: https://www.google.com/maps/search/?api=1&query=${formData.lat},${formData.lon}%0ASelected Services:%0A`;
  selectedServices.forEach(s=>{ message+=`- ${s}%0A`; });
  window.open(`https://wa.me/${number}?text=${message}`,'_blank');
}

// Close modal
function closeModal(){ document.getElementById('bookingModal').style.display='none'; }
</script>

</body>
</html>