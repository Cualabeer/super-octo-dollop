<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOS Mechanics | Mobile Mechanic Medway Towns</title>
<meta name="description" content="Trusted mobile mechanic covering Medway Towns. Emergency callouts from £45. Book oil changes, brakes, batteries, A/C service, and more.">
<meta name="keywords" content="Medway, Chatham, Rochester, Gillingham, Strood, mobile mechanic, car repair, vehicle service, emergency mechanic">
<link rel="stylesheet" href="styles.css">
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#111; color:#eee; }
  h2 { color:#FFD700; margin:0; padding:0.5rem; cursor:pointer; background:#222; border-bottom:1px solid #333; }
  .section-content { display:none; padding:1rem; background:#1a1a1a; }
  .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:1rem; }
  .card { background:#222; padding:1rem; border-radius:8px; box-shadow:0 0 10px rgba(255,215,0,0.2); cursor:pointer; }
  #connectionStatus { padding:10px; text-align:center; font-weight:bold; }
  #bookingForm { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#111; color:#fff; padding:1rem; overflow-y:auto; z-index:1000; }
  #bookingForm button { margin-top:1rem; padding:0.5rem 1rem; cursor:pointer; background:#FFD700; border:none; color:#000; font-weight:bold; border-radius:5px; }
  footer { background:#000; color:#bbb; text-align:center; padding:1rem; margin-top:2rem; }
  footer a { color:#FFD700; text-decoration:none; }
</style>
</head>
<body>

<!-- Connection Status -->
<div id="connectionStatus">Checking backend connection...</div>

<!-- Sections -->
<h2 onclick="toggleSection('services')">Maintained Services</h2>
<div id="services" class="section-content grid"></div>

<h2 onclick="toggleSection('bundles')">Bundles & Combo Offers</h2>
<div id="bundles" class="section-content grid"></div>

<h2 onclick="toggleSection('addons')">Add-on Enhancements</h2>
<div id="addons" class="section-content grid"></div>

<h2 onclick="toggleSection('maintenance')">Maintenance Packages</h2>
<div id="maintenance" class="section-content grid"></div>

<!-- Premium Enhancements Carousel -->
<h2 onclick="toggleSection('premium')">Premium Enhancements</h2>
<div id="premium" class="section-content" style="display:flex; overflow-x:auto; gap:1rem;"></div>

<!-- Booking Form Modal -->
<div id="bookingForm">
  <h2>Confirm Your Booking</h2>
  <form id="form">
    <label>Name:<input type="text" name="name" required></label><br><br>
    <label>Phone:<input type="tel" name="phone" required></label><br><br>
    <label>Email:<input type="email" name="email" required></label><br><br>
    <label>Vehicle Reg:<input type="text" name="reg" pattern="[A-Z]{2}[0-9]{1,2}[A-Z]{3}" title="UK Reg Example: AB12CDE" required></label><br><br>
    <label>Address:<input type="text" name="address" id="address" required></label><br><br>
    <input type="hidden" name="lat" id="lat">
    <input type="hidden" name="lng" id="lng">
    <button type="submit">Confirm & Send to WhatsApp</button>
    <button type="button" onclick="closeForm()">Close</button>
  </form>
</div>

<!-- FAQ Section -->
<h2 onclick="toggleSection('faq')">FAQs</h2>
<div id="faq" class="section-content">
  <p><b>Q:</b> What areas do you cover?<br><b>A:</b> Medway Towns only.</p>
  <p><b>Q:</b> How is the call-out fee applied?<br><b>A:</b> £45 for any mobile repair visit.</p>
  <p><b>Q:</b> Can I book without WhatsApp?<br><b>A:</b> Yes, direct on-site booking is possible.</p>
</div>

<!-- Footer -->
<footer>
  Contact us: <a href="mailto:mobile@sosmechanics.co.uk">mobile@sosmechanics.co.uk</a> | 
  <a href="https://wa.me/447405937104" target="_blank">WhatsApp Chat</a> | Callout Fee: £45
</footer>

<script src="status.js"></script>
<script>
  // Toggle sections
  function toggleSection(id) {
    const el = document.getElementById(id);
    el.style.display = (el.style.display==='grid' || el.style.display==='flex')?'none':(id==='premium'?'flex':'grid');
  }

  // Populate services, bundles, addons, maintenance, premium
  const servicesData = [
    {name:'Oil & Filter Service',desc:'Full oil & filter change',price:85},
    {name:'Brake Pads Replacement',desc:'Replace front/rear pads',price:120},
    {name:'Battery Replacement',desc:'High-capacity car battery',price:150},
    {name:'A/C Re-Gas',desc:'Air conditioning re-gas',price:75},
    {name:'Engine Diagnostics',desc:'Full engine fault check',price:65},
    {name:'Spark Plugs',desc:'Replace all spark plugs',price:40},
    {name:'Cooling Flush',desc:'Radiator and system flush',price:60},
    {name:'Transmission Check',desc:'Manual & Auto',price:80},
    {name:'Brake Fluid Change',desc:'Flush old brake fluid',price:50}
  ];

  const bundlesData = [
    {name:'Essential Care Bundle',desc:'Oil + Brakes',price:260},
    {name:'Complete Health Package',desc:'Oil + Brakes + Battery + A/C',price:450},
    {name:'Starter Kit Bundle',desc:'Battery + Starter Check',price:190},
    {name:'Clutch & Transmission',desc:'Full clutch + transmission check',price:400},
    {name:'Air Care Pack',desc:'A/C + Cabin Filter',price:120},
    {name:'Diagnostics Bundle',desc:'Engine + Transmission',price:120},
    {name:'Premium Engine Tune',desc:'Diagnostics + Spark + Oil',price:230}
  ];

  const addonsData = Array.from({length:30},(_,i)=>({name:`Add-on ${i+1}`,desc:`High-value extra service ${i+1}`,price:Math.floor(Math.random()*150+20)}));

  const maintenanceData = [
    {name:'Monthly Essential Plan',desc:'Monthly basic maintenance',price:29},
    {name:'Premium Care Plan',desc:'Full monthly check',price:49},
    {name:'Quarterly Plan',desc:'Every 3 months',price:79},
    {name:'Half-Year Plan',desc:'Twice a year',price:149},
    {name:'Annual Plan',desc:'Full yearly maintenance',price:250},
    {name:'Engine Health Plan',desc:'Quarterly diagnostics',price:99},
    {name:'Brake Care Plan',desc:'Quarterly brake check',price:69},
    {name:'Battery Care Plan',desc:'Check & replace if needed',price:59},
    {name:'A/C Care Plan',desc:'Air conditioning service',price:39}
  ];

  const premiumData = [
    {name:'Premium Enhancement 1',desc:'High-end engine tune',price:350},
    {name:'Premium Enhancement 2',desc:'Luxury detailing',price:200},
    {name:'Premium Enhancement 3',desc:'Performance brake upgrade',price:400}
  ];

  function populateGrid(id,data){
    const container = document.getElementById(id);
    data.forEach(d=>{
      const card = document.createElement('div');
      card.className='card';
      card.innerHTML=`<b>${d.name}</b><br>${d.desc}<br>£${d.price}`;
      card.onclick=()=>openBooking(d);
      container.appendChild(card);
    });
  }

  populateGrid('services',servicesData);
  populateGrid('bundles',bundlesData);
  populateGrid('addons',addonsData);
  populateGrid('maintenance',maintenanceData);
  populateGrid('premium',premiumData);

  // Booking Form
  const formEl=document.getElementById('bookingForm');
  const form=document.getElementById('form');
  let selectedService=null;

  function openBooking(service){
    selectedService=service;
    formEl.style.display='block';
    // Auto detect location
    if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition(pos=>{
        document.getElementById('lat').value=pos.coords.latitude;
        document.getElementById('lng').value=pos.coords.longitude;
        document.getElementById('address').value=`Lat:${pos.coords.latitude.toFixed(5)}, Lng:${pos.coords.longitude.toFixed(5)}`;
      });
    }
  }

  function closeForm(){ formEl.style.display='none'; }

  form.addEventListener('submit',e=>{
    e.preventDefault();
    const data=new FormData(form);
    let msg=`SOS Mechanics Booking:%0AService: ${selectedService.name}%0APrice: £${selectedService.price}%0AName: ${data.get('name')}%0APhone: ${data.get('phone')}%0AEmail: ${data.get('email')}%0AVehicle: ${data.get('reg')}%0AAddress: ${data.get('address')}%0ALat/Lng: ${data.get('lat')},${data.get('lng')}`;
    window.open(`https://wa.me/447405937104?text=${msg}`,'_blank');
    closeForm();
    alert('✅ Booking sent to WhatsApp');
  });
</script>
</body>
</html>